<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h3> 인천광역시 부평구 아파트전월세 통계  </h3>
<table border="1">
    <thead>
    </thead>
    <tbody>
    </tbody>
</table>
<!-- JQUERY -->
<script  src="http://code.jquery.com/jquery-latest.min.js"></script>
<script>
    $.ajax({
        async : false ,
        method : 'get' ,
        url : 'http://localhost:5000/trans1' ,
        success : response => {

            // 1.
            let thead = document.querySelector('thead') // 1-1 테이블 제목
            // 1-2 제목 구성
            let responseKeys = Object.keys( response )

            let html = `<tr> <th> </th>`
            responseKeys.forEach( key => {  html += ` <th> ${ key } </th>`})

            html += `</tr>`
            thead.innerHTML = html;  // 1-3 대입

            // 1- 4 내용 구성
            let tbody = document.querySelector('tbody')

            const allDetailKeys = Object.keys(response[responseKeys[0]]);
            let html2 = ``
            // 각 detailKey마다 행을 생성
            allDetailKeys.forEach(detailkey => {
               html2 += `<tr> <td> ${detailkey} </td>`;
                // 각 responseKey마다 해당 detailKey의 값을 출력
                responseKeys.forEach(key => {
                    const keyValue = response[key];
                    html2 += `<td> ${keyValue[detailkey]} </td>`;
                });
                html2 += `</tr>`;
            });

            tbody.innerHTML = html2;

<!--            // 1.-->
<!--            let thead = document.querySelector('thead') // 1-1 테이블 제목-->
<!--                // 1-2 제목 구성-->
<!--            let html = `<tr> <th> </th> <th> NO </th> <th> 건축년도 </th> <th> 계약년월 </th> <th> 계약일 </th>-->
<!--                        <th>본번</th> <th>부번</th> <th> 월세금(만원) </th>  <th> 전용면적(㎡)</th>-->
<!--                        <th> 종전계약 월세(만원) </th>  <th> 층 </th>-->
<!--                        </tr>`;-->
<!--            thead.innerHTML = html;  // 1-3 대입-->

<!--            let tbody = document.querySelector('tbody')-->
<!--            let html2 = `<tr>-->
<!--                            <td> 25% </td>-->
<!--                            <td> ${ response['NO']['25%'] } </td>-->
<!--                            <td> ${ response['건축년도']['25%'] } </td>-->
<!--                            <td> ${ response['계약년월']['25%'] } </td>-->
<!--                            <td> ${ response['계약일']['25%'] } </td>-->
<!--                            <td> ${ response['본번']['25%'] } </td>-->
<!--                            <td> ${ response['부번']['25%'] } </td>-->
<!--                            <td> ${ response['월세금(만원)']['25%'] } </td>-->
<!--                            <td> ${ response['전용면적(㎡)']['25%'] } </td>-->
<!--                            <td> ${ response['종전계약 월세(만원)']['25%'] } </td>-->
<!--                            <td> ${ response['층']['25%'] } </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td> 50% </td>-->
<!--                            <td> ${ response['NO']['50%'] } </td>-->
<!--                            <td> ${ response['건축년도']['50%'] } </td>-->
<!--                            <td> ${ response['계약년월']['50%'] } </td>-->
<!--                            <td> ${ response['계약일']['50%'] } </td>-->
<!--                            <td> ${ response['본번']['50%'] } </td>-->
<!--                            <td> ${ response['부번']['50%'] } </td>-->
<!--                            <td> ${ response['월세금(만원)']['50%'] } </td>-->
<!--                            <td> ${ response['전용면적(㎡)']['50%'] } </td>-->
<!--                            <td> ${ response['종전계약 월세(만원)']['50%'] } </td>-->
<!--                            <td> ${ response['층']['50%'] } </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td> 75% </td>-->
<!--                            <td> ${ response['NO']['75%'] } </td>-->
<!--                            <td> ${ response['건축년도']['75%'] } </td>-->
<!--                            <td> ${ response['계약년월']['75%'] } </td>-->
<!--                            <td> ${ response['계약일']['75%'] } </td>-->
<!--                            <td> ${ response['본번']['75%'] } </td>-->
<!--                            <td> ${ response['부번']['75%'] } </td>-->
<!--                            <td> ${ response['월세금(만원)']['75%'] } </td>-->
<!--                            <td> ${ response['전용면적(㎡)']['75%'] } </td>-->
<!--                            <td> ${ response['종전계약 월세(만원)']['75%'] } </td>-->
<!--                            <td> ${ response['층']['75%'] } </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td> max </td>-->
<!--                            <td> ${ response['NO']['max'] } </td>-->
<!--                            <td> ${ response['건축년도']['max'] } </td>-->
<!--                            <td> ${ response['계약년월']['max'] } </td>-->
<!--                            <td> ${ response['계약일']['max'] } </td>-->
<!--                            <td> ${ response['본번']['max'] } </td>-->
<!--                            <td> ${ response['부번']['max'] } </td>-->
<!--                            <td> ${ response['월세금(만원)']['max'] } </td>-->
<!--                            <td> ${ response['전용면적(㎡)']['max'] } </td>-->
<!--                            <td> ${ response['종전계약 월세(만원)']['max'] } </td>-->
<!--                            <td> ${ response['층']['max'] } </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td> min </td>-->
<!--                            <td> ${ response['NO']['min'] } </td>-->
<!--                            <td> ${ response['건축년도']['min'] } </td>-->
<!--                            <td> ${ response['계약년월']['min'] } </td>-->
<!--                            <td> ${ response['계약일']['min'] } </td>-->
<!--                            <td> ${ response['본번']['min'] } </td>-->
<!--                            <td> ${ response['부번']['min'] } </td>-->
<!--                            <td> ${ response['월세금(만원)']['min'] } </td>-->
<!--                            <td> ${ response['전용면적(㎡)']['min'] } </td>-->
<!--                            <td> ${ response['종전계약 월세(만원)']['min'] } </td>-->
<!--                            <td> ${ response['층']['min'] } </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td> mean </td>-->
<!--                            <td> ${ response['NO']['mean'] } </td>-->
<!--                            <td> ${ response['건축년도']['mean'] } </td>-->
<!--                            <td> ${ response['계약년월']['mean'] } </td>-->
<!--                            <td> ${ response['계약일']['mean'] } </td>-->
<!--                            <td> ${ response['본번']['mean'] } </td>-->
<!--                            <td> ${ response['부번']['mean'] } </td>-->
<!--                            <td> ${ response['월세금(만원)']['mean'] } </td>-->
<!--                            <td> ${ response['전용면적(㎡)']['mean'] } </td>-->
<!--                            <td> ${ response['종전계약 월세(만원)']['mean'] } </td>-->
<!--                            <td> ${ response['층']['mean'] } </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td> count </td>-->
<!--                            <td> ${ response['NO']['count'] } </td>-->
<!--                            <td> ${ response['건축년도']['count'] } </td>-->
<!--                            <td> ${ response['계약년월']['count'] } </td>-->
<!--                            <td> ${ response['계약일']['count'] } </td>-->
<!--                            <td> ${ response['본번']['count'] } </td>-->
<!--                            <td> ${ response['부번']['count'] } </td>-->
<!--                            <td> ${ response['월세금(만원)']['count'] } </td>-->
<!--                            <td> ${ response['전용면적(㎡)']['count'] } </td>-->
<!--                            <td> ${ response['종전계약 월세(만원)']['count'] } </td>-->
<!--                            <td> ${ response['층']['count'] } </td>-->
<!--                        </tr>-->
<!--                        <tr>-->
<!--                            <td> std </td>-->
<!--                            <td> ${ response['NO']['std'] } </td>-->
<!--                            <td> ${ response['건축년도']['std'] } </td>-->
<!--                            <td> ${ response['계약년월']['std'] } </td>-->
<!--                            <td> ${ response['계약일']['std'] } </td>-->
<!--                            <td> ${ response['본번']['std'] } </td>-->
<!--                            <td> ${ response['부번']['std'] } </td>-->
<!--                            <td> ${ response['월세금(만원)']['std'] } </td>-->
<!--                            <td> ${ response['전용면적(㎡)']['std'] } </td>-->
<!--                            <td> ${ response['종전계약 월세(만원)']['std'] } </td>-->
<!--                            <td> ${ response['층']['std'] } </td>-->
<!--                        </tr>`-->
<!--            tbody.innerHTML = html2;-->

            // 2.
            console.log( response ); //response 성공시 목록 출력
            console.log( Object.keys( response  ) ); // JS 에서 객체내 모든 키를 호출 : Object.keys( 객체 )
            let responseKeys = Object.keys( response ) //responseKeys 변수에 호출 한 모든 키를 대입
            responseKeys.forEach( key => {             //responseKeys 반복문 실행
                console.log( key ) // 통계에 사용되는 거래정보 필드명
                console.log( response[`${key}`] ) // 통계 필드의 값

                keyValue = response[`${key}`]
                console.log( Object.keys( keyValue ) ) // 통계 계산/항목 명 // ['25%', '50%', '75%', 'count', 'max', 'mean', 'min', 'std']
                detailKeys = Object.keys( keyValue )
                detailKeys.forEach( detailkey => {
                    console.log( detailkey )
                    console.log( keyValue[`${ detailkey }`] )
                })
            })
        }
    })
</script>
</body>
</html>